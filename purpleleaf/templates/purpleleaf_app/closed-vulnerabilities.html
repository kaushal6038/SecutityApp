{% extends 'purpleleaf_app/base.html' %}
    {% block title %}
            <title>History - Purpleleaf Dashboard</title>
    {% endblock %}
    
{% block content %}
	<div class="dashboard-wrapper dashboard-wrapper-lg dashboard-wrapper-lg-custom">
		<div class="container-fluid">
			<div class="row gutter">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<div class="panel panel-margin">
						<div class="panel-body">
							<div class="tabbable tabs-left clearfix">
								<ul class="nav nav-tabs">
									<li>
										<a href="#archive" data-toggle="tab">
											Archived
										</a>
									</li>
									<li class="active">
										<a href="#activity" data-toggle="tab">
											Activity
										</a>
									</li>
									<li>
										<a href="#retest" data-toggle="tab">
											Retest
										</a>
									</li>
								</ul>

								<div class="tab-content">
									<div class="tab-pane active" id="activity">
										<div class="row gutter">
											<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
												<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
													<div class="panel custom-display">
														<div class="panel-body">
															<div class="table-responsive">
																<table class="table-bordered table-hover table-condensed no-margin">
																	<thead>
																		<tr>
																			<th class="notifications_heading">Date</th>
																			<th class="notifications_heading">Activity</th>
																		</tr>
																	</thead>
																	<tbody>
																		{% for data in activity %}
																		<tr>
																			<td>{{ data.created_at}}</td>
																			<td>{{ data.activity }}</td>
																		</tr>
																		{% endfor%}
																	</tbody>
																</table>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>

									<div class="tab-pane" id="archive" style="height: -webkit-fill-available;">
										<div class="row gutter">
											<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
												<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
													<div class="panel custom-display">
								    					<div class="panel-heading">
								            				<h3>Closed Vulnerabilities</h3>
								            			</div>
														<div class="panel-body">
															<div class="table-responsive">
																<table class="table-bordered table-hover table-condensed no-margin">
																	<thead>
																		<tr>
																			<th class="notifications_heading">Risk</th>
																			<th class="notifications_heading">Title</th>
																			<th class="notifications_heading">Host</th>
																			<th class="notifications_heading">Port</th>
																			<th class="notifications_heading">Date</th>
																		</tr>
																	</thead>
																<tbody>
																{% for archive in archived%}
																	<tr>
																		<td style="text-align:left;">{% if archive.risk == 'Critical' %}
																			<button class="btn btn-critical btn-xs">Critical</button>
																		{% elif archive.risk == 'High' %}
																			<button class="btn btn-high btn-xs ">High</button>
																		{% elif archive.risk == 'Medium' %}
																			<button class="btn btn-medium btn-xs">Medium</button>
																		{% elif archive.risk == 'Low' %}
																			<button class="btn btn-low btn-xs">Low</button>
																		{% elif archive.risk == 'Note' %}
																			<button class="btn btn-primary btn-xs btn-note">Note</button>
																		{% endif %}
																		</td>
																		<td style="text-align:left;">{{archive.title}}</td>
																		<td style="text-align:left;">{{archive.host}}</td>
																		<td style="text-align:left;">{{archive.port}}</td>
																		<td style="text-align:left;">{{archive.archive_date}}</td>
																		</tr>
																	{% endfor %}
																	</tbody>
																</table>
															</div>
														</div>
													</div>
												</div>
									        </div>
									    </div>
									</div>

									<div class="tab-pane" id="retest">
										<div class="row gutter">
       	 									<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          										<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          											<div class="panel custom-display">
          												<div class="panel-body">
              												<div class="table-responsive">
                												<table class="table-bordered table-hover table-condensed no-margin" >
	                    											<thead>
		                    											<tr>
							    											<th class="notifications_heading">Risk</th>
																			<th class="notifications_heading">Title</th>
																			<th class="notifications_heading">Host</th>
																			<th class="notifications_heading">Port</th>
																			<th class="notifications_heading">Date</th>
																			<th class="notifications_heading">Retest Note</th>
																		</tr>
					    											</thead>
																	<tbody>
																	{% for vulnerability in vulnerabilities%}
																		<tr>
																			<td style="text-align:left;">{% if vulnerability.risk == 'Critical' %}
																				<button class="btn btn-critical btn-xs">Critical</button>
																			{% elif vulnerability.risk == 'High' %}
																				<button class="btn btn-high btn-xs ">High</button>
																			{% elif vulnerability.risk == 'Medium' %}
																				<button class="btn btn-medium btn-xs">Medium</button>
																			{% elif vulnerability.risk == 'Low' %}
																				<button class="btn btn-low btn-xs">Low</button>
																			{% elif vulnerability.risk == 'Note' %}
																				<button class="btn btn-primary btn-xs btn-note">Note</button>
																			{% endif %}
																			</td>
																			<td style="text-align:left;">{{vulnerability.title}}</td>
						        											<td style="text-align:left;">{{vulnerability.host}}</td>
						        											<td style="text-align:left;">{{vulnerability.port}}</td>
																			<td style="text-align:left;">{{vulnerability.closed_date}}</td>
																			<td style="text-align:left;">{{vulnerability.retest_note}}</td>
	                          											</tr>
	                        										{% endfor %}
	                        										</tbody>
	                        									</table>
	                        								</div>
	                    								</div>
	                								</div>
	            								</div>
	        								</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
	    	</div>
	    </div>
	</div>
	
{% endblock %}